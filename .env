# Environment for Testing (Mock AI Model)
NODE_ENV=development

# RabbitMQ Configuration
RABBITMQ_URL=amqp://admin:admin123@rabbitmq:5672
RABBITMQ_USER=admin
RABBITMQ_PASSWORD=admin123
QUEUE_NAME=assessment_analysis
EXCHANGE_NAME=atma_exchange
ROUTING_KEY=analysis.process
DEAD_LETTER_QUEUE=assessment_analysis_dlq

# Queue Configuration
QUEUE_DURABLE=true
MESSAGE_PERSISTENT=true

# Google Generative AI Configuration (Not used when USE_MOCK_MODEL=true)
GOOGLE_AI_API_KEY=AIzaSyAH2hc8NyXkiuiPfib63bAZgzV1t7m3rbc
GOOGLE_AI_MODEL=gemini-2.5-flash
AI_TEMPERATURE=0.4

# Mock AI Configuration - ENABLED FOR TESTING
# Set to 'true' to use mock AI responses instead of real Gemini API
USE_MOCK_MODEL=true

# Token Counting Configuration
# Enable/disable token counting and usage tracking
ENABLE_TOKEN_COUNTING=true

# Usage data retention settings (in days)
TOKEN_USAGE_RETENTION_DAYS=30

# Token pricing configuration (per 1000 tokens in USD)
# Gemini 2.5 Flash pricing as of 2024
INPUT_TOKEN_PRICE_PER_1K=0.30
OUTPUT_TOKEN_PRICE_PER_1K=2.50

# Token counting performance settings
TOKEN_COUNT_TIMEOUT=5000
ENABLE_TOKEN_COUNT_FALLBACK=true

# Internal Service Communication Key (same across all services)
INTERNAL_SERVICE_KEY=internal_service_secret_key_change_in_production

# Archive Service Configuration
ARCHIVE_SERVICE_URL=http://localhost:3002/archive

# AI Rate Limiting Configuration
AI_RATE_LIMIT_RPM=15
AI_MAX_RETRIES=5
AI_RETRY_BASE_DELAY=2000
AI_MAX_RETRY_DELAY=30000

# Notification Service Configuration (Optional - if notification service is implemented)
NOTIFICATION_SERVICE_URL=http://localhost:3005

# Assessment Service Configuration
ASSESSMENT_SERVICE_URL=http://localhost:3003

# Worker Configuration
WORKER_CONCURRENCY=5
MAX_RETRIES=3
RETRY_DELAY=5000
PROCESSING_TIMEOUT=1800000
HEARTBEAT_INTERVAL=300000

# Logging Configuration
LOG_LEVEL=info
LOG_FILE=logs/analysis-worker.log

# Database Optimization Configuration
DB_BATCH_SIZE=10
DB_BATCH_INTERVAL=5000
HTTP_KEEP_ALIVE=true
HTTP_MAX_SOCKETS=50
HTTP_MAX_FREE_SOCKETS=10

# Rate Limiting Configuration
RATE_LIMIT_USER_HOUR=5
RATE_LIMIT_IP_HOUR=20
RATE_LIMIT_GLOBAL_MINUTE=100

# Job Deduplication Configuration
JOB_CACHE_RETENTION_MS=3600000
MAX_JOB_CACHE_SIZE=10000

# Audit Logging Configuration
AUDIT_LOG_DIR=logs/audit
AUDIT_ENCRYPTION_KEY=your_audit_encryption_key_here
AUDIT_RETENTION_DAYS=2555

# Token Refund Configuration
ENABLE_TOKEN_REFUND=true
REFUND_PROCESSING_INTERVAL=5000

# Note: Analysis Worker now permanently uses optimized processor for better performance
